<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proposal</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

</head>

<body>
    <div class="sidebar">
        <!-- The sidebar -->
        <div class="img">
            <img src="images/Sail.jpg">
        </div>
        <a href="/clubs">Clubs</a>
        <a class="active" href="/event-proposal">Event Proposal</a>
        <a href="/events-requested">Events Requested</a>
        <a href="/events-approved">Events Approved</a>
        <a href="/events-rejected">Events Rejected</a>
    </div>
    </div>

    <div class="content">
        <div class="navHeader" style="margin: 0;">
            <nav class="navbar navbar-expand-lg bg-body-tertiary">
                <div style="background: rgb(17, 150, 0);" class="container-fluid">

                    <h1><b>Event Proposal</b></h1>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0"> </ul>
                        <img style="width: 100px; height: 100px;" src="images/Pandit_Deendayal_Energy_University_logo.png">

                    </div>
                </div>
            </nav>
        </div>
        <form id="userform">
            <div class="mb-3">
                <label for="eventName" class="form-label">Event Name</label>
                <input type="text" class="form-control" name="eventName" aria-describedby="emailHelp">
                <div id="emailHelp" class="form-text">WRITE NAME OF YOUR EVENT</div>
            </div>


            <div class="mb-3">
                <label for="eventDate" class="form-label">Event Date</label>
                <input type="date" class="form-control" name="eventDate">
            </div>


            <div class="mb-3">
                <label for="clubName" class="form-label">Club Name</label>
                <input type="text" class="form-control" name="clubName" aria-describedby="emailHelp">
                <div id="emailHelp" class="form-text">WRITE NAME OF YOUR CLUB</div>
            </div>


            <div class="mb-3">
                <label for="venue" class="form-label">Venue</label>
                <input type="text" class="form-control" name="venue" aria-describedby="emailHelp">
                <div id="emailHelp" class="form-text">WRITE REQUESTED VENUE FOR EVENT</div>
            </div>

            <div class="mb-3">
                <label for="expectedAudience" class="form-label">Expected Audience</label>
                <input type="number" class="form-control" name="expectedAudience" aria-describedby="emailHelp">
                <div id="emailHelp" class="form-text"></div>
            </div>

            <div class="mb-3">
                <label for="cordinatorName" class="form-label">Cordinator Name</label>
                <input type="text" class="form-control" name="cordinatorName" aria-describedby="emailHelp">
                <div id="emailHelp" class="form-text">WRITE NAME OF YOUR Cordinator</div>
            </div>

            <div class="mb-3">
                <label for="cordinatorNo" class="form-label">Cordinator No.</label>
                <input type="number" class="form-control" name="cordinatorNo" aria-describedby="emailHelp">
                <div id="emailHelp" class="form-text">CONTACT DETAILS OF THE CORDINATORS</div>
            </div>

            <button type="submit" id="submitform" class="btn btn-primary">Submit</button>
        </form>

        <br>
        <br>
        <br>

        <!-- <button class="btn btn-primary" id="show" onclick="showUsers()" type="submit">show users</button>
         -->
    </div>
    </div>
    <script>
        const form = document.getElementById("userform");
        const but = document.getElementById("show");
        const users = document.getElementById("users");



        form.addEventListener("submit", (event) => {
            event.preventDefault();

            const fdata = new FormData(form);

            eventName = fdata.get("eventName");
            eventDate = fdata.get("eventDate");
            clubName = fdata.get("clubName");
            venue = fdata.get("venue");
            expectedAudience = fdata.get("expectedAudience");
            cordinatorName = fdata.get("cordinatorName");
            cordinatorNo = fdata.get("cordinatorNo");
            console.log(eventName)




            // add user
            data = {
                "eventName": eventName,
                "eventDate": eventDate,
                "clubName": clubName,
                "venue": venue,
                "expectedAudience": expectedAudience,
                "cordinatorName": cordinatorName,
                "cordinatorNo": cordinatorNo,


            }

            fetch("https://long-teal-bandicoot-hem.cyclic.app/events", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                }).then((response) => response.json())
                .then((data) => {
                    console.log(data);
                });
            alert("Event Requested SuccessFully!!!!!!");
            location.reload();
        })



        // const showUsers = () => {
        //     window.location.href = "http://localhost:3000/getEvent"
        // }

        function showUsers() {
            console.log("kjbnd;kajbdkj;ab")
            fetch("https://long-teal-bandicoot-hem.cyclic.app/getEvent", {
                    method: "GET",
                    headers: {
                        "Content-Type": "application/json"
                    },

                }).then((response) => response.json())
                .then((data) => {
                    console.log(data);
                });
        }
    </script>
</body>

</html>